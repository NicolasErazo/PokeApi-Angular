<mat-card
  class="poke-card"
  *ngIf="pokemon && !loading"
  [ngClass]="'bg-' + pokemon.types[0].type.name"
>
  <div class="button-container">
    <!-- Botón de volver -->
    <button mat-icon-button class="back-button" (click)="goBack()">
      <mat-icon>arrow_back</mat-icon>
    </button>
    &nbsp;
    <!-- Botón de shuffle -->
    <button mat-icon-button class="back-button" (click)="shuffle()">
      <mat-icon>shuffle</mat-icon>
    </button>
  </div>

  <!-- Encabezado -->
  <mat-card-header>
    <mat-card-title>
      {{ pokemon.name | titlecase }}
      <span class="poke-id">#{{ pokemon.id }}</span>
    </mat-card-title>
  </mat-card-header>

  <!-- Contenido -->
  <mat-card-content>
    <!-- Pestañas de imágenes -->
    <ng-container *ngIf="pokemonImgFront || pokemonImgShiny; else noImage">
      <mat-tab-group animationDuration="500ms" class="img-tabs">
        <mat-tab label="Normal" *ngIf="pokemonImgFront">
          <img class="poke-img" [src]="pokemonImgFront" [alt]="pokemon.name" />
        </mat-tab>

        <mat-tab label="Shiny" *ngIf="pokemonImgShiny">
          <img
            class="poke-img"
            [src]="pokemonImgShiny"
            [alt]="pokemon.name + ' Shiny'"
          />
        </mat-tab>
      </mat-tab-group>
    </ng-container>

    <ng-template #noImage>
      <div class="error-container">
        <mat-icon>image_not_supported</mat-icon>
        <p>No se encontró imagen</p>
      </div>
    </ng-template>

    <!-- Tipos -->
    <div class="section type-container">
      <mat-chip-listbox aria-label="Tipos de Pokémon">
        <mat-chip
          *ngFor="let type of pokemon.types"
          class="type-chip"
          [ngClass]="'type-' + type.type.name"
        >
          {{ type.type.name | titlecase }}
        </mat-chip>
      </mat-chip-listbox>
    </div>

    <!-- Peso y altura -->
    <div class="section stats-summary">
      <div><strong>Peso:</strong> {{ getWeight() }}</div>
      <div><strong>Altura:</strong> {{ getHeight() }}</div>
    </div>

    <!-- Habilidades -->
    <div class="section abilities-section" *ngIf="pokemon.abilities?.length">
      <strong class="section-title">Habilidades:</strong>
      <ul class="abilities-list">
        <li *ngFor="let ability of pokemon.abilities">
          {{ ability.ability.name | titlecase }}
        </li>
      </ul>
    </div>

    <!-- Estadísticas -->
    <div class="section" *ngIf="pokemon.stats?.length">
      <strong>Estadísticas:</strong>
      <div *ngFor="let stat of pokemon.stats" class="stat-bar">
        <div class="label">
          {{ stat.stat.name | titlecase }} ({{ stat.base_stat }})
        </div>
        <mat-progress-bar
          [value]="stat.base_stat"
          [color]="stat.base_stat > 60 ? 'accent' : 'warn'"
          mode="determinate"
        >
        </mat-progress-bar>
      </div>
    </div>
  </mat-card-content>
</mat-card>

<!-- Estado de carga -->
<div *ngIf="loading" class="loading-container">
  <mat-spinner diameter="50"></mat-spinner>
  <p>Cargando Pokémon...</p>
</div>

<!-- Manejo de errores -->
<div *ngIf="!pokemon && !loading" class="error-container">
  <mat-icon>error_outline</mat-icon>
  <p>No se pudo cargar la información del Pokémon</p>

  <div class="button-container">
    <!-- Botón de volver -->
    <button mat-icon-button class="back-button" (click)="goBack()">
      <mat-icon>arrow_back</mat-icon>
    </button>
    &nbsp;
    <!-- Botón de shuffle -->
    <button mat-icon-button class="back-button" (click)="shuffle()">
      <mat-icon>shuffle</mat-icon>
    </button>
  </div>
</div>
